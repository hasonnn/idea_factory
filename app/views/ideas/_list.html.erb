<% @ideas.each do |idea| %>
    <div>
        <h2><%= link_to idea.title, idea_path(idea) %></h2>
        <p><%= idea.body %></p>
        <h4>Created by: <%= idea.user&.full_name || 'DELETED'%></h4>

        <small>
        <% if user_signed_in? && can?(:like, idea) %>
        <% like = current_user.likes.find_by_idea_id(idea) %>
            <% if like %>
                <%= link_to 'Liked', like_path(like), method: :delete %>
            <% else %>
                <%= link_to 'Like', idea_likes_path(idea), method: :post %>
            <% end %>
        <% end %>
        </small>
        <small>Likes: <%= idea.likes.count %></small>
    </div>
    <hr>
<% end %>